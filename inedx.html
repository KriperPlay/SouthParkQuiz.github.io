<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–Æ–∂–Ω—ã–π –ü–∞—Ä–∫: –ö—Ç–æ —Ç—ã?</title>
    <style>
        /* ========== –°–¢–ò–õ–ò –í –°–¢–ò–õ–ï SOUTH PARK ========== */
        /* –®—Ä–∏—Ñ—Ç –∫–∞–∫ –≤ —Å–µ—Ä–∏–∞–ª–µ (–¥–µ—Ç—Å–∫–∏–π, –Ω–µ—Ä–æ–≤–Ω—ã–π) */
        @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #f5e6d3; /* –¶–≤–µ—Ç —Ç–µ–ª–µ—Å–Ω–æ–≥–æ/–±—É–º–∞–∂–Ω–æ–≥–æ —Ñ–æ–Ω–∞ –∫–∞–∫ –≤ —Å—Ç–∞—Ä—ã—Ö —Å–µ—Ä–∏—è—Ö */
            font-family: 'Comic Neue', 'Comic Sans MS', cursive, sans-serif;
            color: #2d2d2d;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* –ì—Ä—É–±–∞—è —Ç–µ–∫—Å—Ç—É—Ä–∞ –±—É–º–∞–≥–∏ –∏ –∏–º–∏—Ç–∞—Ü–∏—è —Å–∫–æ—Ç—á–∞ */
        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle, #d3b9a2 2px, transparent 2px),
                repeating-linear-gradient(45deg, rgba(0,0,0,0.02) 0px, rgba(0,0,0,0.02) 2px, transparent 2px, transparent 4px);
            background-size: 30px 30px, 8px 8px;
            pointer-events: none;
            z-index: 0;
        }

        .container {
            background-color: #fff9e6;
            border: 5px solid #2b2b2b;
            border-radius: 30px 30px 15px 15px;
            box-shadow: 15px 15px 0 rgba(0,0,0,0.2), 0 0 0 3px #f0b000, 0 0 0 6px #2b2b2b;
            padding: 30px 25px;
            max-width: 700px;
            width: 100%;
            position: relative;
            z-index: 10;
            transition: 0.2s;
        }

        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞–∫ –≤ –∑–∞—Å—Ç–∞–≤–∫–µ */
        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .header h1 {
            font-size: 3.2rem;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: -2px;
            line-height: 1;
            color: #e6342f; /* –ö—Ä–∞—Å–Ω—ã–π –∫–∞–∫ —É –ö–∞–π–ª–∞ */
            text-shadow: 
                4px 4px 0 #f0b000,
                6px 6px 0 #2b2b2b,
                8px 8px 0 rgba(0,0,0,0.1);
            -webkit-text-stroke: 2px #2b2b2b;
            transform: rotate(-1deg);
            margin-bottom: 10px;
        }

        .header h1 span {
            display: inline-block;
            transform: rotate(1deg) scale(1.1);
            color: #2a9fda; /* –°–∏–Ω–∏–π –∫–∞–∫ —É –°—Ç–µ–Ω–¥–∞ */
        }

        .subtitle {
            font-size: 1.5rem;
            background-color: #2b2b2b;
            color: white;
            display: inline-block;
            padding: 8px 25px;
            border-radius: 40px;
            box-shadow: 5px 5px 0 #c0c0c0;
            transform: rotate(0.5deg);
        }

        /* –ü–µ—Ä—Å–æ–Ω–∞–∂–∏ –≤–æ–∫—Ä—É–≥ (–¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ) */
        .characters {
            display: flex;
            justify-content: space-around;
            margin: 20px 0 10px;
            filter: drop-shadow(5px 5px 0 rgba(0,0,0,0.2));
        }

        .char-item {
            width: 70px;
            height: 70px;
            background-color: #f0b000;
            border: 3px solid #2b2b2b;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            transform: rotate(var(--rot, 0deg));
            background: #fee3c0;
            box-shadow: 5px 5px 0 #2b2b2b;
        }

        /* –ê–≤–∞—Ç–∞—Ä–∫–∏ (–ø—Ä–æ—Å—Ç–æ –±—É–∫–≤—ã –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã, –Ω–æ –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —ç–º–æ–¥–∑–∏/–∫–∞—Ä—Ç–∏–Ω–∫–∏) */
        .char-item:nth-child(1) { background: #c4d9ba; } /* –ö–µ–Ω–Ω–∏ */
        .char-item:nth-child(2) { background: #f0b000; } /* –ö–∞—Ä—Ç–º–∞–Ω */
        .char-item:nth-child(3) { background: #bf4b3a; color: white; } /* –ö–∞–π–ª */
        .char-item:nth-child(4) { background: #3f7040; color: white; } /* –°—Ç–µ–Ω */
        .char-item:nth-child(5) { background: #b0866c; } /* –ë–∞—Ç—Ç–µ—Ä—Å */

        /* –ë–ª–æ–∫ –≤–æ–ø—Ä–æ—Å–∞ */
        .quiz-area {
            background-color: #fef7d2;
            border: 4px dashed #2b2b2b;
            border-radius: 50px 20px 50px 20px;
            padding: 25px 20px;
            margin: 20px 0;
            box-shadow: inset 0 0 0 3px white, 10px 10px 0 #2b2b2b;
        }

        .question {
            font-size: 1.9rem;
            font-weight: 800;
            margin-bottom: 25px;
            text-align: center;
            word-break: break-word;
            background: white;
            padding: 15px;
            border-radius: 100px 20px 100px 20px;
            border: 3px solid #2b2b2b;
            transform: rotate(-0.3deg);
            box-shadow: 5px 5px 0 #7c7c7c;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            background: white;
            border: 4px solid #2b2b2b;
            border-radius: 60px 20px 60px 20px;
            padding: 15px 25px;
            font-size: 1.5rem;
            font-weight: 700;
            font-family: 'Comic Neue', cursive;
            text-align: left;
            cursor: pointer;
            transition: all 0.05s linear;
            box-shadow: 8px 8px 0 #2b2b2b;
            display: flex;
            align-items: center;
            gap: 15px;
            transform: rotate(0deg);
        }

        .option-btn:hover {
            background: #f0f0f0;
            transform: translate(3px, 3px);
            box-shadow: 5px 5px 0 #2b2b2b;
        }

        .option-btn.selected {
            background: #b2ff8e;
            border-color: #0a5c0a;
            box-shadow: 2px 2px 0 #0a5c0a;
            transform: translate(6px, 6px);
        }

        .option-emoji {
            font-size: 2.2rem;
            filter: drop-shadow(2px 2px 0 #000);
        }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å */
        .progress {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin-top: 20px;
        }

        .progress-bar {
            height: 20px;
            background: #d3b9a2;
            border: 3px solid #2b2b2b;
            border-radius: 30px;
            flex-grow: 1;
            margin: 0 15px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: #e6342f;
            background: linear-gradient(90deg, #f0b000, #e6342f);
            border-radius: 30px;
            transition: width 0.2s;
        }

        /* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .nav-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .nav-btn {
            background: #fee3c0;
            border: 4px solid #2b2b2b;
            border-radius: 40px;
            padding: 12px 30px;
            font-size: 1.8rem;
            font-weight: 800;
            font-family: 'Comic Neue', cursive;
            cursor: pointer;
            box-shadow: 7px 7px 0 #2b2b2b;
            transition: 0.05s;
            flex: 1 0 auto;
            text-transform: uppercase;
            color: #2b2b2b;
        }

        .nav-btn:active {
            transform: translate(5px, 5px);
            box-shadow: 2px 2px 0 #2b2b2b;
        }

        .nav-btn:disabled {
            opacity: 0.3;
            transform: none;
            box-shadow: 7px 7px 0 #2b2b2b;
            pointer-events: none;
        }

        /* –†–µ–∑—É–ª—å—Ç–∞—Ç */
        .result-block {
            text-align: center;
            background: #fbe4a0;
            border: 5px solid #2b2b2b;
            border-radius: 80px 20px 80px 20px;
            padding: 25px;
            margin-top: 20px;
        }

        .result-title {
            font-size: 2.5rem;
            font-weight: 900;
            text-transform: uppercase;
            color: #2b2b2b;
            text-shadow: 4px 4px 0 #e6342f;
        }

        .result-char {
            font-size: 5rem;
            line-height: 1.2;
            background: white;
            display: inline-block;
            padding: 0px 40px;
            border-radius: 200px;
            border: 4px solid #2b2b2b;
            margin: 15px 0;
            box-shadow: 8px 8px 0 #2b2b2b;
        }

        .result-desc {
            font-size: 1.7rem;
            background: #2b2b2b;
            color: white;
            padding: 15px;
            border-radius: 40px;
        }

        .restart-btn {
            background: #e6342f;
            color: white;
            border: 4px solid #2b2b2b;
            font-size: 2rem;
            padding: 15px 40px;
            margin-top: 25px;
            border-radius: 80px;
            box-shadow: 9px 9px 0 #2b2b2b;
            cursor: pointer;
        }

        .hidden {
            display: none;
        }

        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è */
        @media (max-width: 500px) {
            .header h1 { font-size: 2.4rem; }
            .question { font-size: 1.5rem; }
            .option-btn { font-size: 1.2rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –®–∞–ø–∫–∞ -->
        <div class="header">
            <h1>
                <span>SOUTH</span> <span>PARK</span>
            </h1>
            <div class="subtitle">–ö–¢–û –¢–´?</div>
        </div>

        <!-- –†–æ–∂–∏—Ü—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è -->
        <div class="characters">
            <div class="char-item" style="--rot:-3deg">üòé</div>
            <div class="char-item" style="--rot:4deg">üêª</div>
            <div class="char-item" style="--rot:-5deg">üß•</div>
            <div class="char-item" style="--rot:2deg">üß¢</div>
            <div class="char-item" style="--rot:-2deg">üßÄ</div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã -->
        <div id="quizContainer">
            <div class="quiz-area" id="quizArea">
                <div class="question" id="questionText">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <div class="options" id="optionsContainer"></div>
            </div>

            <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
            <div class="progress">
                <span id="currentQ">1</span>/<span id="totalQ">5</span>
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 20%;"></div></div>
            </div>

            <div class="nav-buttons">
                <button class="nav-btn" id="prevBtn" disabled>‚óÄ –ù–ê–ó–ê–î</button>
                <button class="nav-btn" id="nextBtn">–î–ê–õ–ï–ï ‚ñ∂</button>
            </div>
        </div>

        <!-- –ë–ª–æ–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç) -->
        <div id="resultContainer" class="result-block hidden">
            <div class="result-title">–¢–´ ‚Äî</div>
            <div class="result-char" id="resultChar">ü¶∏</div>
            <div class="result-desc" id="resultDesc">–≠—Ä–∏–∫ –ö–∞—Ä—Ç–º–∞–Ω</div>
            <button class="restart-btn" id="restartBtn">‚óÄ –ó–ê–ù–û–í–û</button>
        </div>
    </div>

    <script>
        (function() {
            // ========== –î–ê–ù–ù–´–ï –í–ò–ö–¢–û–†–ò–ù–´ ==========
            const characters = [
                { 
                    name: '–≠—Ä–∏–∫ –ö–∞—Ä—Ç–º–∞–Ω', 
                    emoji: 'üê∑', 
                    desc: '–¢—ã –≤–ª–∞—Å—Ç–Ω—ã–π, —Ö–∏—Ç—Ä—ã–π –∏ –Ω–µ —Ç–µ—Ä–ø–∏—à—å, –∫–æ–≥–¥–∞ –≤—Å—ë –∏–¥—ë—Ç –Ω–µ –ø–æ-—Ç–≤–æ–µ–º—É. –ù–æ –ø—Ä–∏ —ç—Ç–æ–º ‚Äî –ø—Ä–∏—Ä–æ–∂–¥—ë–Ω–Ω—ã–π –ª–∏–¥–µ—Ä! –£–≤–∞–∂–∞–π —Å–≤–æ–∏—Ö –¥—Ä—É–∑–µ–π, –ø—Ä–∏–¥—É—Ä–æ–∫!' 
                },
                { 
                    name: '–°—Ç—ç–Ω –ú–∞—Ä—à', 
                    emoji: 'üß¢', 
                    desc: '–¢—ã –≥–æ–ª–æ—Å —Ä–∞–∑—É–º–∞ –≤ –∫–æ–º–ø–∞–Ω–∏–∏. –ù–µ–º–Ω–æ–≥–æ —Ü–∏–Ω–∏—á–Ω—ã–π, –Ω–æ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–π. –í—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å, —Ö–æ—Ç—è —á–∞—Å—Ç–æ –≥–æ–≤–æ—Ä–∏—à—å: ¬´–û –±–æ–∂–µ –º–æ–π, –æ–Ω–∏ —É–±–∏–ª–∏ –ö–µ–Ω–Ω–∏!¬ª' 
                },
                { 
                    name: '–ö–∞–π–ª –ë—Ä–æ—Ñ–ª–æ–≤—Å–∫–∏', 
                    emoji: 'üß•', 
                    desc: '–¢—ã –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω—ã–π, —É–º–Ω—ã–π –∏ –Ω–æ—Å–∏—Ç —à–∞–ø–∫—É-—É—à–∞–Ω–∫—É. –¢–µ–±—è –±–µ—Å–∏—Ç –ö–∞—Ä—Ç–º–∞–Ω, –Ω–æ —Ç—ã –≤—Å—ë —Ä–∞–≤–Ω–æ —Å –Ω–∏–º –¥—Ä—É–∂–∏—à—å. –ò —Ç—ã –ª—é–±–∏—à—å —Å–≤–æ–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∏ –Ω–∞ —á—Ç–æ!' 
                },
                { 
                    name: '–ö–µ–Ω–Ω–∏ –ú–∞–∫–∫–æ—Ä–º–∏–∫', 
                    emoji: 'üòé', 
                    desc: '–¢—ã –±–µ–¥–Ω—ã–π, –Ω–æ –∫—Ä—É—Ç–æ–π. –¢–µ–±—è —Å–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å –∏–∑-–∑–∞ –∫–∞–ø—é—à–æ–Ω–∞, –Ω–æ —Ç—ã –¥—É—à–∞ –∫–æ–º–ø–∞–Ω–∏–∏. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –Ω–µ —É–º–∏—Ä–∞–π —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ.' 
                },
                { 
                    name: '–ë–∞—Ç—Ç–µ—Ä—Å –°—Ç–æ—Ç—á', 
                    emoji: 'üêª', 
                    desc: '–¢—ã –Ω–∞–∏–≤–Ω—ã–π, –¥–æ–±—Ä—ã–π –∏ –≤–µ—á–Ω–æ –ø–æ–ø–∞–¥–∞–µ—à—å –≤ –ø–µ—Ä–µ–¥–µ–ª–∫–∏. –ù–æ —Ç–≤–æ—è –¥–æ–±—Ä–æ—Ç–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–º —Å–ø–∞—Å–∞—é—Ç –º–∏—Ä (–∏–Ω–æ–≥–¥–∞ –±—É–∫–≤–∞–ª—å–Ω–æ). –û—Ö, –≥–∞–º–±–æ–ª—ã!' 
                }
            ];

            const questions = [
                {
                    text: '–¢–≤–æ–∏ –¥—Ä—É–∑—å—è –ø–æ–∑–≤–∞–ª–∏ —Ç–µ–±—è –¥—É—Ä–∞—á–∏—Ç—å—Å—è, –Ω–æ –º–∞–º–∞ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç —É–±–∏—Ä–∞—Ç—å—Å—è –≤ –∫–æ–º–Ω–∞—Ç–µ. –¢–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è?',
                    answers: [
                        { text: '–°–∫–∞–∂—É –º–∞–º–µ, —á—Ç–æ —É–±–∏—Ä–∞–ª—Å—è, –∞ —Å–∞–º —Å–±–µ–≥—É!', chars: [3, 0, 0, 0, 0] }, // –ö–∞—Ä—Ç–º–∞–Ω
                        { text: '–ë—É–¥—É –Ω—ã—Ç—å, –ø–æ–∫–∞ –º–∞–º–∞ –Ω–µ —Å–¥–∞—Å—Ç—Å—è.', chars: [0, 0, 0, 0, 4] }, // –ë–∞—Ç—Ç–µ—Ä—Å
                        { text: '–ë—ã—Å—Ç—Ä–æ —É–±–µ—Ä—É—Å—å –∏ –ø–æ–π–¥—É –≥—É–ª—è—Ç—å.', chars: [0, 2, 1, 0, 0] }, // –°—Ç—ç–Ω –∏ –ö–∞–π–ª
                        { text: '–ü–æ–π–¥—É –≥—É–ª—è—Ç—å, –∞ –∫–æ–º–Ω–∞—Ç–∞ –ø–æ–¥–æ–∂–¥—ë—Ç.', chars: [0, 0, 0, 3, 0] } // –ö–µ–Ω–Ω–∏
                    ]
                },
                {
                    text: '–ö–∞–∫–æ–π –ø—Ä–µ–¥–º–µ—Ç —Ç—ã –±—ã –≤—ã–±—Ä–∞–ª –≤ —à–∫–æ–ª–µ?',
                    answers: [
                        { text: '–§–∏–∑-—Ä–∞ ‚Äî —Ç—É—Å–∏—Ç—å —Å –¥—Ä—É–∑—å—è–º–∏!', chars: [0, 2, 1, 2, 0] },
                        { text: '–ò—Å–∫—É—Å—Å—Ç–≤–æ ‚Äî –≤—ã—Ä–∞–∂–∞—Ç—å —Å–µ–±—è.', chars: [0, 0, 0, 0, 4] },
                        { text: '–ò—Å—Ç–æ—Ä–∏—è ‚Äî —Å–ø–æ—Ä–∏—Ç—å —Å —É—á–∏—Ç–µ–ª–µ–º.', chars: [2, 1, 3, 0, 0] },
                        { text: '–û–±–µ–¥ ‚Äî —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ!', chars: [0, 0, 0, 3, 0] }
                    ]
                },
                {
                    text: '–¢–≤–æ–π –ª—é–±–∏–º—ã–π —Å–ø–æ—Å–æ–± –ø–æ–≤–µ—Å–µ–ª–∏—Ç—å—Å—è?',
                    answers: [
                        { text: '–ò–≥—Ä–∞—Ç—å –≤ –≤–∏–¥–µ–æ–∏–≥—Ä—ã –∏ –∂—Ä–∞—Ç—å —á–∏–ø—Å—ã.', chars: [3, 1, 0, 1, 0] },
                        { text: '–°—Ç—Ä–æ–∏—Ç—å –∫–æ–∑–Ω–∏ –ø—Ä–æ—Ç–∏–≤ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤.', chars: [4, 0, 0, 0, 0] },
                        { text: '–¢—É—Å–æ–≤–∞—Ç—å—Å—è –Ω–∞ —É–ª–∏—Ü–µ, –¥–∞–∂–µ –≤ –º–æ—Ä–æ–∑.', chars: [0, 0, 0, 4, 0] },
                        { text: '–ü–µ—Ç—å –∏–ª–∏ –∏–≥—Ä–∞—Ç—å –≤ —Ä–æ–ª–µ–≤–∫–∏.', chars: [0, 0, 0, 0, 4] }
                    ]
                },
                {
                    text: '–ß—Ç–æ —Ç—ã –¥—É–º–∞–µ—à—å –æ –∂–∏—Ç–µ–ª—è—Ö –°–∞—É—Ç-–ü–∞—Ä–∫–∞?',
                    answers: [
                        { text: '–û–Ω–∏ —Ç—É–ø—ã–µ!', chars: [3, 1, 0, 1, 0] },
                        { text: '–û–Ω–∏ –ø—Ä–∏–∫–æ–ª—å–Ω—ã–µ, –Ω–æ —Å—Ç—Ä–∞–Ω–Ω—ã–µ.', chars: [0, 2, 2, 0, 1] },
                        { text: '–ú–Ω–µ –≤—Å—ë —Ä–∞–≤–Ω–æ, —è –≤ –∫–∞–ø—é—à–æ–Ω–µ.', chars: [0, 0, 0, 4, 0] },
                        { text: '–û–Ω–∏ –∫–ª–∞—Å—Å–Ω—ã–µ! –í—Å–µ —Ç–∞–∫–∏–µ –º–∏–ª—ã–µ!', chars: [0, 0, 0, 0, 4] }
                    ]
                },
                {
                    text: '–ï—Å–ª–∏ –±—ã —Ç—ã –º–æ–≥ –æ–±–ª–∞–¥–∞—Ç—å —Å—É–ø–µ—Ä—Å–∏–ª–æ–π, –∫–∞–∫–æ–π?',
                    answers: [
                        { text: '–ù–µ—É—è–∑–≤–∏–º–æ—Å—Ç—å (—á—Ç–æ–± –Ω–µ —É–º–∏—Ä–∞—Ç—å).', chars: [0, 0, 0, 4, 0] },
                        { text: '–ì–∏–ø–µ—Ä-–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç, —á—Ç–æ–±—ã –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞—Ç—å.', chars: [4, 0, 1, 0, 0] },
                        { text: '–°–∏–ª–∞ —É–±–µ–∂–¥–µ–Ω–∏—è –∏ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å.', chars: [0, 2, 3, 0, 0] },
                        { text: '–ü—Ä–µ–≤—Ä–∞—â–∞—Ç—å –≤—Å—ë –≤ –≥–∞–º–±–æ–ª—ã!', chars: [0, 0, 0, 0, 4] }
                    ]
                }
            ];

            // ========== –°–û–°–¢–û–Ø–ù–ò–ï ==========
            let currentQuestionIndex = 0;
            const totalQuestions = questions.length;
            // –ú–∞—Å—Å–∏–≤ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ (–∏–Ω–¥–µ–∫—Å—ã). null - –Ω–µ –≤—ã–±—Ä–∞–Ω
            let selectedAnswers = new Array(totalQuestions).fill(null);

            // –°—á–µ—Ç—á–∏–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π (–∏–Ω–¥–µ–∫—Å—ã 0-4 —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç characters)
            let characterScores = [0, 0, 0, 0, 0];

            // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
            const quizContainer = document.getElementById('quizContainer');
            const resultContainer = document.getElementById('resultContainer');
            const questionEl = document.getElementById('questionText');
            const optionsEl = document.getElementById('optionsContainer');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const restartBtn = document.getElementById('restartBtn');
            const currentQSpan = document.getElementById('currentQ');
            const totalQSpan = document.getElementById('totalQ');
            const progressFill = document.getElementById('progressFill');
            const resultChar = document.getElementById('resultChar');
            const resultDesc = document.getElementById('resultDesc');

            totalQSpan.textContent = totalQuestions;

            // ========== –§–£–ù–ö–¶–ò–ò ==========
            // –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞ –∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
            function renderQuestion() {
                const q = questions[currentQuestionIndex];
                questionEl.textContent = q.text;
                
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤
                let htmlStr = '';
                q.answers.forEach((ans, idx) => {
                    const isSelected = (selectedAnswers[currentQuestionIndex] === idx);
                    const selectedClass = isSelected ? 'selected' : '';
                    htmlStr += `
                        <div class="option-btn ${selectedClass}" data-qidx="${currentQuestionIndex}" data-aidx="${idx}">
                            <span class="option-emoji">${getEmojiForAnswer(idx)}</span>
                            <span>${ans.text}</span>
                        </div>
                    `;
                });
                optionsEl.innerHTML = htmlStr;

                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞ –Ω–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏
                document.querySelectorAll('.option-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const qIdx = parseInt(btn.dataset.qidx);
                        const aIdx = parseInt(btn.dataset.aidx);
                        selectAnswer(qIdx, aIdx);
                    });
                });

                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
                currentQSpan.textContent = currentQuestionIndex + 1;
                let progressPercent = ((currentQuestionIndex + 1) / totalQuestions) * 100;
                progressFill.style.width = progressPercent + '%';

                // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                prevBtn.disabled = (currentQuestionIndex === 0);
                // –ú–µ–Ω—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ "–î–∞–ª–µ–µ" –Ω–∞ "–†–µ–∑—É–ª—å—Ç–∞—Ç" –µ—Å–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–æ–ø—Ä–æ—Å
                if (currentQuestionIndex === totalQuestions - 1) {
                    nextBtn.textContent = '–ö–¢–û –Ø? ‚ñ∂';
                } else {
                    nextBtn.textContent = '–î–ê–õ–ï–ï ‚ñ∂';
                }
            }

            function getEmojiForAnswer(idx) {
                const emojis = ['üòà', 'üòá', 'ü§ì', 'üòé'];
                return emojis[idx % emojis.length];
            }

            // –í—ã–±—Ä–∞—Ç—å –æ—Ç–≤–µ—Ç
            function selectAnswer(qIdx, aIdx) {
                if (qIdx !== currentQuestionIndex) return; // –∑–∞—â–∏—Ç–∞
                selectedAnswers[qIdx] = aIdx;
                // –í–∏–∑—É–∞–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –∫–ª–∞—Å—Å—ã
                document.querySelectorAll('.option-btn').forEach(btn => {
                    const btnQIdx = parseInt(btn.dataset.qidx);
                    const btnAIdx = parseInt(btn.dataset.aidx);
                    if (btnQIdx === qIdx) {
                        if (btnAIdx === aIdx) {
                            btn.classList.add('selected');
                        } else {
                            btn.classList.remove('selected');
                        }
                    }
                });
            }

            // –ü–æ–¥—Å—á–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ selectedAnswers
            function calculateResult() {
                // –û–±–Ω—É–ª—è–µ–º —Å—á–µ—Ç
                characterScores = [0, 0, 0, 0, 0];
                
                for (let qIdx = 0; qIdx < questions.length; qIdx++) {
                    const aIdx = selectedAnswers[qIdx];
                    if (aIdx !== null) {
                        const answer = questions[qIdx].answers[aIdx];
                        // –ü—Ä–∏–±–∞–≤–ª—è–µ–º –æ—á–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º (chars - –º–∞—Å—Å–∏–≤ –ø—Ä–∏–±–∞–≤–æ–∫)
                        for (let c = 0; c < characters.length; c++) {
                            characterScores[c] += answer.chars[c];
                        }
                    }
                }

                // –ù–∞—Ö–æ–¥–∏–º –∏–Ω–¥–µ–∫—Å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ —Å –º–∞–∫—Å–∏–º—É–º–æ–º
                let maxScore = -1;
                let bestCharIndex = 0;
                for (let i = 0; i < characterScores.length; i++) {
                    if (characterScores[i] > maxScore) {
                        maxScore = characterScores[i];
                        bestCharIndex = i;
                    }
                }

                // –ï—Å–ª–∏ –≤—Å–µ –Ω—É–ª–∏ (–Ω–∏ –æ–¥–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞) - —Ä–∞–Ω–¥–æ–º–Ω—ã–π –∏–ª–∏ –ö–∞—Ä—Ç–º–∞–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                if (maxScore <= 0) {
                    bestCharIndex = 0; // –ö–∞—Ä—Ç–º–∞–Ω, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –≤—Å–µ–≥–¥–∞ –ø–æ–±–µ–∂–¥–∞–µ—Ç
                }

                return bestCharIndex;
            }

            // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            function showResult() {
                const bestIdx = calculateResult();
                const char = characters[bestIdx];
                resultChar.textContent = char.emoji + ' ' + char.name;
                resultDesc.textContent = char.desc;

                // –°–∫—Ä—ã–≤–∞–µ–º –≤–∏–∫—Ç–æ—Ä–∏–Ω—É, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                quizContainer.classList.add('hidden');
                resultContainer.classList.remove('hidden');
            }

            // –°–±—Ä–æ—Å –∫ –Ω–∞—á–∞–ª—É
            function restartQuiz() {
                currentQuestionIndex = 0;
                selectedAnswers = new Array(totalQuestions).fill(null);
                characterScores = [0,0,0,0,0];

                quizContainer.classList.remove('hidden');
                resultContainer.classList.add('hidden');

                renderQuestion();
            }

            // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
            function goToNext() {
                if (currentQuestionIndex < totalQuestions - 1) {
                    // –ï—Å–ª–∏ –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
                    currentQuestionIndex++;
                    renderQuestion();
                } else {
                    // –ï—Å–ª–∏ —ç—Ç–æ –±—ã–ª –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–æ–ø—Ä–æ—Å - –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                    // –ù–æ –ø—Ä–æ–≤–µ—Ä–∏–º, –≤—ã–±—Ä–∞–Ω –ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç–≤–µ—Ç? (–º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å, –Ω–æ –ª—É—á—à–µ –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å)
                    if (selectedAnswers[currentQuestionIndex] === null) {
                        alert('–û—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å, –∂–∏—Ä—Ç—Ä–µ—Å—Ç!');
                        return;
                    }
                    showResult();
                }
            }

            function goToPrev() {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    renderQuestion();
                }
            }

            // ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò ==========
            renderQuestion();

            // –ö–Ω–æ–ø–∫–∏
            prevBtn.addEventListener('click', goToPrev);
            nextBtn.addEventListener('click', goToNext);
            restartBtn.addEventListener('click', restartQuiz);

            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ö–¢–û –Ø?" –∞ –æ—Ç–≤–µ—Ç –Ω–µ –≤—ã–±—Ä–∞–Ω - –Ω–µ –¥–∞–≤–∞—Ç—å —É–π—Ç–∏
            // –ù–æ –º—ã —É–∂–µ —Å–¥–µ–ª–∞–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É –≤ goToNext.
        })();
    </script>
</body>
</html>